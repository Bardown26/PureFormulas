<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PureFormulas ‚Äî PDP Autoship Pricing Redesign</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,400;0,6..12,600;0,6..12,700;0,6..12,800;1,6..12,400&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --pf-green: #00875a;
    --pf-green-light: #e6f4ee;
    --pf-green-hover: #006b47;
    --pf-green-border: #b8dece;
    --pf-blue: #0066cc;
    --pf-blue-hover: #0055aa;
    --pf-blue-light: #e8f2ff;
    --pf-blue-border: #b3d4f7;
    --pf-text-dark: #272727;
    --pf-text-mid: #555;
    --pf-text-light: #777;
    --pf-text-muted: #999;
    --pf-red: #c0392b;
    --pf-orange: #d2801f;
    --pf-border: #e2e2e2;
    --pf-border-light: #eee;
    --pf-bg: #f5f5f5;
    --pf-bg-card: #fff;
    --pf-bg-panel: #f8f8f8;
    --pf-bg-savings: #fff8ee;
    --pf-savings-border: #f0d9a8;
    --pf-radius: 8px;
    --pf-radius-sm: 6px;
    --pf-shadow: 0 1px 3px rgba(0,0,0,.06), 0 1px 2px rgba(0,0,0,.04);
    --pf-shadow-md: 0 2px 8px rgba(0,0,0,.08), 0 1px 3px rgba(0,0,0,.06);
    --pf-transition: 200ms ease;
    --pf-font: 'Nunito Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  }

  body {
    font-family: var(--pf-font);
    background: var(--pf-bg);
    color: var(--pf-text-dark);
    -webkit-font-smoothing: antialiased;
    padding: 0;
  }

  /* ========== COMPARISON LAYOUT ========== */
  .comparison-header {
    max-width: 1200px;
    margin: 0 auto;
    padding: 32px 24px 0;
  }
  .comparison-header h1 {
    font-size: 22px;
    font-weight: 800;
    color: var(--pf-text-dark);
  }
  .comparison-header p {
    color: var(--pf-text-mid);
    font-size: 14px;
    margin-top: 4px;
  }

  .comparison-wrap {
    max-width: 1400px;
    margin: 24px auto 60px;
    padding: 0 24px;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 24px;
    align-items: start;
  }
  @media (max-width: 1100px) {
    .comparison-wrap { grid-template-columns: 1fr; max-width: 500px; }
  }

  .version-col {
    position: relative;
  }
  .version-label {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: .08em;
    padding: 5px 12px;
    border-radius: 20px;
    margin-bottom: 14px;
  }
  .version-label.current {
    background: #fee2e2;
    color: #b91c1c;
  }
  .version-label.proposed {
    background: var(--pf-green-light);
    color: var(--pf-green);
  }
  .version-label .dot {
    width: 7px; height: 7px;
    border-radius: 50%;
  }
  .version-label.current .dot { background: #b91c1c; }
  .version-label.proposed .dot { background: var(--pf-green); }

  /* ========== SHARED PDP PANEL ========== */
  .pdp-panel {
    background: var(--pf-bg-card);
    border-radius: var(--pf-radius);
    box-shadow: var(--pf-shadow-md);
    overflow: hidden;
  }

  .pdp-panel-top {
    background: var(--pf-bg-panel);
    padding: 16px 20px 12px;
    border-bottom: 1px solid var(--pf-border-light);
  }

  .pdp-free-ship {
    font-size: 12px;
    font-weight: 700;
    color: var(--pf-green);
    margin-bottom: 4px;
  }
  .pdp-ship-time {
    font-size: 12px;
    color: var(--pf-text-mid);
  }
  .pdp-ship-time strong {
    color: var(--pf-green);
    font-weight: 700;
  }

  .pdp-section {
    padding: 14px 20px;
    border-bottom: 1px solid var(--pf-border-light);
  }
  .pdp-section:last-child { border-bottom: none; }

  /* Options select */
  .pdp-select-wrap {
    position: relative;
  }
  .pdp-select-wrap select {
    width: 100%;
    padding: 10px 36px 10px 12px;
    font-family: var(--pf-font);
    font-size: 14px;
    border: 1px solid var(--pf-border);
    border-radius: var(--pf-radius-sm);
    background: #fff;
    appearance: none;
    cursor: pointer;
  }
  .pdp-select-wrap::after {
    content: '‚ñæ';
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--pf-text-light);
    pointer-events: none;
    font-size: 12px;
  }
  .pdp-select-label {
    position: absolute;
    top: -8px;
    left: 10px;
    background: #fff;
    padding: 0 4px;
    font-size: 11px;
    color: var(--pf-text-light);
  }

  /* Qty + stock row */
  .qty-stock-row {
    display: flex;
    align-items: center;
    gap: 16px;
  }
  .qty-label {
    font-size: 12px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .qty-group {
    display: inline-flex;
    align-items: center;
    border: 1px solid var(--pf-border);
    border-radius: var(--pf-radius-sm);
    overflow: hidden;
  }
  .qty-group button {
    width: 32px; height: 32px;
    border: none;
    background: var(--pf-bg-panel);
    cursor: pointer;
    font-size: 14px;
    color: var(--pf-text-mid);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background var(--pf-transition);
  }
  .qty-group button:hover { background: var(--pf-border); }
  .qty-group input {
    width: 36px;
    text-align: center;
    border: none;
    border-left: 1px solid var(--pf-border);
    border-right: 1px solid var(--pf-border);
    font-family: var(--pf-font);
    font-size: 14px;
    font-weight: 600;
    height: 32px;
  }
  .in-stock {
    font-size: 12px;
    font-weight: 700;
    color: var(--pf-green);
    display: flex;
    align-items: center;
    gap: 3px;
  }
  .in-stock svg { width: 14px; height: 14px; }

  /* ========================================
     CURRENT (BROKEN) AUTOSHIP STYLING
     ======================================== */
  .current-autoship fieldset {
    border: none;
    padding: 0;
  }
  .current-radio-group {
    display: flex;
    flex-direction: column;
    gap: 0;
  }
  .current-radio-option {
    border: 2px solid var(--pf-border);
    border-radius: var(--pf-radius-sm);
    padding: 12px 16px;
    cursor: pointer;
    transition: all var(--pf-transition);
    position: relative;
  }
  .current-radio-option + .current-radio-option {
    margin-top: -2px;
  }
  .current-radio-option.selected {
    border-color: var(--pf-green);
    background: #fafffe;
    z-index: 1;
  }
  .current-radio-option:first-child {
    border-radius: var(--pf-radius-sm) var(--pf-radius-sm) 0 0;
  }
  .current-radio-option:last-child {
    border-radius: 0 0 var(--pf-radius-sm) var(--pf-radius-sm);
  }
  .current-radio-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .current-radio-left {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .current-radio-left input[type="radio"] {
    accent-color: var(--pf-green);
    width: 16px; height: 16px;
  }
  .current-radio-left label {
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
  }

  /* THE BUG ‚Äî same price on both */
  .current-price-display {
    font-weight: 800;
    font-size: 22px;
    color: var(--pf-text-dark);
  }
  .current-price-display .currency {
    font-size: 14px;
    vertical-align: super;
    margin-right: 1px;
  }
  .current-price-display .decimals {
    font-size: 14px;
    vertical-align: super;
  }

  /* Bug annotation */
  .bug-callout {
    margin-top: 12px;
    background: #fef2f2;
    border: 1px dashed #fca5a5;
    border-radius: var(--pf-radius-sm);
    padding: 10px 12px;
    font-size: 12px;
    color: #991b1b;
    display: flex;
    align-items: flex-start;
    gap: 6px;
    line-height: 1.5;
  }
  .bug-callout .bug-icon {
    flex-shrink: 0;
    font-size: 14px;
    margin-top: 1px;
  }

  /* Current expanded autoship details */
  .current-autoship-details {
    margin-top: 12px;
    padding-top: 10px;
    border-top: 1px solid var(--pf-border-light);
  }
  .current-frequency-label {
    font-size: 13px;
    font-weight: 700;
    margin-bottom: 6px;
  }
  .current-freq-row {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .current-benefits {
    list-style: none;
    margin-top: 12px;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  .current-benefits li {
    display: flex;
    align-items: center;
    gap: 7px;
    font-size: 13px;
    color: var(--pf-text-mid);
  }
  .current-benefits .check-circle {
    width: 18px; height: 18px;
    border-radius: 50%;
    background: var(--pf-green);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .current-benefits .check-circle svg {
    width: 10px; height: 10px;
    fill: none;
    stroke: #fff;
    stroke-width: 2.5;
  }

  /* ========================================
     REDESIGNED AUTOSHIP STYLING
     ======================================== */

  /* Reuse stacked radio layout ‚Äî new-radio-* classes */
  .new-radio-group {
    display: flex;
    flex-direction: column;
    gap: 0;
  }
  .new-radio-option {
    border: 2px solid var(--pf-border);
    border-radius: var(--pf-radius-sm);
    padding: 12px 16px;
    cursor: pointer;
    transition: all var(--pf-transition);
    position: relative;
  }
  .new-radio-option + .new-radio-option {
    margin-top: -2px;
  }
  .new-radio-option.selected {
    border-color: var(--pf-green);
    background: #fafffe;
    z-index: 1;
  }
  .new-radio-option:first-child {
    border-radius: var(--pf-radius-sm) var(--pf-radius-sm) 0 0;
  }
  .new-radio-option:last-child {
    border-radius: 0 0 var(--pf-radius-sm) var(--pf-radius-sm);
  }
  .new-radio-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .new-radio-left {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .new-radio-left input[type="radio"] {
    accent-color: var(--pf-green);
    width: 16px; height: 16px;
  }
  .new-radio-left label {
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
  }
  .new-radio-right {
    text-align: right;
  }
  .new-price-display {
    font-weight: 800;
    font-size: 22px;
    color: var(--pf-text-dark);
  }
  .new-price-display.green {
    color: var(--pf-green);
  }
  .new-price-display .currency {
    font-size: 14px;
    vertical-align: super;
    margin-right: 1px;
  }
  .new-price-display .decimals {
    font-size: 14px;
    vertical-align: super;
  }
  .new-price-was {
    font-size: 12px;
    color: var(--pf-text-muted);
    text-decoration: line-through;
  }
  .new-save-badge {
    display: inline-block;
    background: var(--pf-bg-savings);
    border: 1px solid var(--pf-savings-border);
    color: #b8860b;
    font-size: 10px;
    font-weight: 800;
    padding: 2px 7px;
    border-radius: 3px;
    margin-left: 8px;
  }

  /* Autoship expanded ‚Äî frequency + benefits side by side */
  .new-autoship-details {
    margin-top: 12px;
    padding-top: 10px;
    border-top: 1px solid var(--pf-border-light);
  }
  .new-details-row {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    flex-wrap: wrap;
  }
  .new-freq-block {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .new-freq-label {
    font-size: 13px;
    font-weight: 700;
  }
  .new-freq-row {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .new-freq-row .days-label {
    font-size: 14px;
    font-weight: 700;
  }
  .new-benefits {
    list-style: none;
    display: flex;
    flex-wrap: wrap;
    gap: 3px 14px;
    margin: 0;
    padding-top: 2px;
  }
  .new-benefits li {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 12px;
    color: var(--pf-text-mid);
  }
  .new-benefits .check-sm {
    color: var(--pf-green);
    font-weight: 700;
    font-size: 13px;
  }

  /* Savings callout banner */
  .savings-banner {
    margin-top: 12px;
    background: var(--pf-bg-savings);
    border: 1px solid var(--pf-savings-border);
    border-radius: var(--pf-radius-sm);
    padding: 10px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    font-weight: 600;
    color: #92400e;
    line-height: 1.4;
  }
  .savings-banner.hidden { display: none; }
  .savings-banner .savings-icon {
    flex-shrink: 0;
    font-size: 18px;
  }
  .savings-banner strong {
    font-weight: 800;
    color: var(--pf-green);
  }

  /* Variant button selector (V3) */
  .pdp-variant-btns {
    display: flex;
    gap: 8px;
  }
  .pdp-variant-btn {
    flex: 1;
    padding: 9px 6px;
    font-family: var(--pf-font);
    font-size: 13px;
    font-weight: 700;
    border: 1.5px solid var(--pf-border);
    border-radius: var(--pf-radius-sm);
    background: #fff;
    color: var(--pf-text-mid);
    cursor: pointer;
    text-align: center;
    transition: all var(--pf-transition);
  }
  .pdp-variant-btn:hover {
    border-color: #ccc;
  }
  .pdp-variant-btn.is-active {
    border-color: var(--pf-green);
    background: var(--pf-green-light);
    color: var(--pf-green);
    font-weight: 800;
  }

  /* Add to Cart button */
  .pdp-atc-btn {
    display: block;
    width: 100%;
    padding: 14px;
    font-family: var(--pf-font);
    font-size: 16px;
    font-weight: 800;
    border: none;
    border-radius: var(--pf-radius-sm);
    cursor: pointer;
    transition: background var(--pf-transition);
  }
  .pdp-atc-btn.green {
    background: var(--pf-green);
    color: #fff;
  }
  .pdp-atc-btn.green:hover { background: var(--pf-green-hover); }

  /* ========== Product info table ========== */
  .pdp-info-table {
    padding: 14px 20px;
    border-top: 1px solid var(--pf-border-light);
  }
  .pdp-info-row {
    display: flex;
    justify-content: space-between;
    padding: 5px 0;
    font-size: 13px;
    color: var(--pf-text-mid);
  }
  .pdp-info-row span:last-child {
    font-weight: 700;
    color: var(--pf-text-dark);
  }

  /* ========== ANNOTATION OVERLAY ========== */
  .annotation-arrow {
    position: absolute;
    z-index: 5;
  }
  .annot-box {
    background: #1e1e2e;
    color: #fff;
    font-size: 11px;
    font-weight: 600;
    padding: 8px 12px;
    border-radius: 6px;
    line-height: 1.4;
    max-width: 200px;
    box-shadow: 0 4px 12px rgba(0,0,0,.2);
  }
  .annot-box.red { background: #991b1b; }
  .annot-box.green { background: #065f46; }

  /* Proto nav */
  .proto-nav {
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 24px;
    padding: 10px 20px;
    background: #fff;
    border-bottom: 1px solid var(--pf-border);
    font-size: 13px;
  }
  .proto-nav a {
    text-decoration: none;
    color: var(--pf-text-mid);
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 4px;
    transition: color 200ms ease, background 200ms ease;
  }
  .proto-nav a:hover {
    color: var(--pf-text-dark);
    background: var(--pf-bg);
  }
  .proto-nav a.is-active {
    color: var(--pf-green);
    font-weight: 800;
    background: var(--pf-green-light);
  }
  .proto-nav__group {
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .proto-nav__sep {
    color: var(--pf-border);
    font-size: 11px;
    user-select: none;
  }

  /* ========================================
     LIVE-SITE MATCH PANELS
     ======================================== */
  .live-section-header {
    max-width: 1200px;
    margin: 0 auto;
    padding: 48px 24px 0;
    border-top: 2px solid var(--pf-border);
  }
  .live-section-header h2 {
    font-size: 20px;
    font-weight: 800;
    color: var(--pf-text-dark);
  }
  .live-section-header p {
    color: var(--pf-text-mid);
    font-size: 14px;
    margin-top: 4px;
  }
  .live-comparison-wrap {
    max-width: 1000px;
    margin: 24px auto 60px;
    padding: 0 24px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    align-items: start;
  }
  @media (max-width: 900px) {
    .live-comparison-wrap { grid-template-columns: 1fr; max-width: 500px; }
  }

  /* Base panel */
  .live-panel {
    background: #fff;
    border-radius: 0.375rem;
    box-shadow: 0 1px 4px rgba(0,0,0,.08);
    overflow: hidden;
    font-family: "Helvetica Neue", Inter, Roboto, Arial, sans-serif;
    color: #232323;
    font-size: 14px;
  }

  .live-panel-top {
    background: #f5f5f5;
    padding: 16px 20px 12px;
    border-bottom: 1px solid #e9ecef;
  }
  .live-panel-section {
    padding: 12px 20px;
    border-bottom: 1px solid #e9ecef;
  }
  .live-panel-section:last-child { border-bottom: none; }

  .live-free-ship {
    font-size: 12px;
    font-weight: 700;
    color: #205c40;
    margin-bottom: 4px;
  }
  .live-ship-time {
    font-size: 12px;
    color: #555;
  }
  .live-ship-time strong {
    color: #205c40;
    font-weight: 700;
  }

  /* Qty + Stock */
  .live-qty-row {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: nowrap;
  }
  .live-qty-label {
    font-size: 12px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .live-qty-group {
    display: inline-flex;
    align-items: center;
    border: 1px solid #d9dadb;
    border-radius: 0.375rem;
    overflow: hidden;
  }
  .live-qty-group button {
    width: 34px; height: 34px;
    border: none;
    background: #f5f5f5;
    cursor: pointer;
    font-size: 14px;
    color: #555;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.15s;
    font-family: inherit;
  }
  .live-qty-group button:hover { background: #e9ecef; }
  .live-qty-group input {
    width: 40px;
    text-align: center;
    border: none;
    border-left: 1px solid #d9dadb;
    border-right: 1px solid #d9dadb;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    height: 34px;
  }
  .live-in-stock {
    font-size: 12px;
    font-weight: 700;
    color: #205c40;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  /* Radio option cards ‚Äî live site style */
  .live-radio-group {
    display: flex;
    flex-direction: column;
    gap: 0;
  }
  .live-radio-option {
    border: 2px solid #d9dadb;
    padding: 14px 16px;
    cursor: pointer;
    transition: all 0.15s;
    position: relative;
  }
  .live-radio-option + .live-radio-option {
    margin-top: -2px;
  }
  .live-radio-option:first-child {
    border-radius: 0.375rem 0.375rem 0 0;
  }
  .live-radio-option:last-child {
    border-radius: 0 0 0.375rem 0.375rem;
  }
  .live-radio-option.selected {
    border-color: #205c40;
    background: #f8fdf9;
    z-index: 1;
  }
  .live-radio-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .live-radio-left {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .live-radio-left input[type="radio"] {
    accent-color: #205c40;
    width: 18px; height: 18px;
    margin: 0;
    flex-shrink: 0;
  }
  .live-radio-left label {
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
  }

  /* Styled price ‚Äî live site split format */
  .live-price {
    font-weight: 700;
    color: #232323;
    display: inline-flex;
    align-items: flex-start;
    line-height: 1;
  }
  .live-price .currency {
    font-size: 13px;
    margin-top: 2px;
    margin-right: 1px;
  }
  .live-price .main-price {
    font-size: 24px;
    font-weight: 800;
  }
  .live-price .decimals {
    font-size: 13px;
    margin-top: 2px;
  }
  .live-price-big .main-price { font-size: 26px; }
  .live-price-small .main-price { font-size: 20px; }
  .live-price-small .currency,
  .live-price-small .decimals { font-size: 12px; }
  .live-price.green { color: #205c40; }

  /* Strikethrough was-price */
  .live-price-was {
    font-size: 12px;
    color: #999;
    text-decoration: line-through;
    margin-top: 2px;
  }

  /* Save badge */
  .live-save-badge {
    display: inline-block;
    background: #e6f4ee;
    color: #205c40;
    font-size: 10px;
    font-weight: 800;
    padding: 2px 7px;
    border-radius: 3px;
    margin-left: 8px;
    text-transform: uppercase;
  }

  /* Autoship expanded details */
  .live-autoship-details {
    margin-top: 12px;
    padding-top: 10px;
    border-top: 1px solid #e9ecef;
    font-size: 12px;
  }
  .live-freq-label {
    font-size: 13px;
    font-weight: 700;
    margin-bottom: 6px;
  }
  .live-freq-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 2px;
  }
  .live-freq-row .days-label {
    font-size: 14px;
    font-weight: 700;
  }

  /* Benefits list */
  .live-benefits {
    list-style: none;
    margin: 12px 0 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  .live-benefits li {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: #555;
  }
  .live-benefits .check-circle {
    width: 20px; height: 20px;
    border-radius: 50%;
    background: #205c40;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .live-benefits .check-circle svg {
    width: 11px; height: 11px;
    fill: none;
    stroke: #fff;
    stroke-width: 2.5;
  }

  /* Collapsed "Never run out" */
  .live-collapsed-text {
    margin-top: 8px;
    font-size: 12px;
    color: #555;
  }
  .live-collapsed-text .learn-more {
    background: none;
    border: none;
    color: #0d57d1;
    text-decoration: underline;
    font-size: 12px;
    cursor: pointer;
    padding: 0;
    margin-left: 4px;
    font-family: inherit;
  }

  /* ATC inside radio card */
  .live-atc-btn {
    display: block;
    width: 100%;
    padding: 12px 16px;
    font-family: inherit;
    font-size: 16px;
    font-weight: 700;
    border: none;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: background 0.15s;
    margin-top: 12px;
    color: #fff;
    background: #205c40;
  }
  .live-atc-btn:hover { background: #1a4d35; }

  /* Savings banner ‚Äî live style */
  .live-savings-banner {
    margin-top: 12px;
    background: #e6f4ee;
    border: 1px solid #b8dece;
    border-radius: 0.375rem;
    padding: 10px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    font-weight: 600;
    color: #205c40;
    line-height: 1.4;
  }
  .live-savings-banner.hidden { display: none; }
  .live-savings-banner strong {
    font-weight: 800;
  }

  /* Product info table */
  .live-info-table {
    padding: 14px 20px;
    border-top: 1px solid #e9ecef;
  }
  .live-info-row {
    display: flex;
    justify-content: space-between;
    padding: 5px 0;
    font-size: 14px;
    color: #555;
  }
  .live-info-row span:last-child {
    font-weight: 700;
    color: #232323;
  }
  .live-info-note {
    font-size: 12px;
    color: #999;
    padding: 0 20px 12px;
  }

  /* Bug callout ‚Äî same style as existing */
  .live-bug-callout {
    margin-top: 12px;
    background: #fef2f2;
    border: 1px dashed #fca5a5;
    border-radius: 0.375rem;
    padding: 10px 12px;
    font-size: 12px;
    color: #991b1b;
    display: flex;
    align-items: flex-start;
    gap: 6px;
    line-height: 1.5;
  }
  .live-bug-callout .bug-icon {
    flex-shrink: 0;
    font-size: 14px;
    margin-top: 1px;
  }

  /* Version label ‚Äî live style */
  .version-label.live {
    background: #e8f0fd;
    color: #0d57d1;
  }
  .version-label.live .dot { background: #0d57d1; }
</style>
</head>
<body>

<nav class="proto-nav">
  <a href="pf-pdp-redesign.html" class="is-active">PDP</a>
  <span class="proto-nav__group">
    <a href="pf-card-redesign.html">Card V1</a>
    <span class="proto-nav__sep">/</span>
    <a href="pf-card-redesign-v2.html">V2</a>
  </span>
  <a href="pf-cart-page-redesign.html">Cart Page</a>
  <a href="pf-slideout-cart-redesign.html">Slideout Cart</a>
</nav>

<!-- ========== HEADER ========== -->
<div class="comparison-header">
  <h1>PDP Autoship Pricing ‚Äî Redesign Comparison</h1>
  <p>O.N.E.‚Ñ¢ Multivitamin ‚Äì 60 Capsules by Pure Encapsulations &nbsp;‚Ä¢&nbsp; Base price: $45.20 &nbsp;‚Ä¢&nbsp; Autoship discount: 10%</p>
</div>

<!-- ========== SIDE BY SIDE ========== -->
<div class="comparison-wrap">

  <!-- ======== CURRENT (BROKEN) ======== -->
  <div class="version-col">
    <div class="version-label current"><span class="dot"></span> Current ‚Äî Live Site</div>
    <div class="pdp-panel">
      <div class="pdp-panel-top">
        <div class="pdp-free-ship">FREE Shipping</div>
        <div class="pdp-ship-time">Ships today if ordered within <strong>8 hr 17 min</strong></div>
      </div>

      <div class="pdp-section">
        <div class="pdp-select-wrap">
          <span class="pdp-select-label">Options</span>
          <select>
            <option>30 Capsules</option>
            <option selected>60 Capsules</option>
            <option>120 Capsules</option>
          </select>
        </div>
      </div>

      <div class="pdp-section">
        <div class="qty-stock-row">
          <div>
            <div class="qty-label">Quantity:</div>
            <div class="qty-group">
              <button>‚àí</button>
              <input type="text" value="1" readonly>
              <button>+</button>
            </div>
          </div>
          <div class="in-stock">
            <svg viewBox="0 0 20 20" fill="none"><path d="M5 10l3.5 3.5L15 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            In Stock
          </div>
        </div>
      </div>

      <!-- AUTOSHIP ‚Äî THE PROBLEM -->
      <div class="pdp-section current-autoship">
        <fieldset>
          <div class="current-radio-group">
            <!-- Autoship selected -->
            <div class="current-radio-option selected" id="cur-autoship-opt" onclick="curSelect('autoship')">
              <div class="current-radio-header">
                <div class="current-radio-left">
                  <input type="radio" name="cur-autoship" id="cur-yes" checked>
                  <label for="cur-yes">Autoship & Save at checkout</label>
                </div>
                <div class="current-price-display">
                  <span class="currency">$</span>45<span class="decimals">20</span>
                </div>
              </div>
              <!-- Expanded details -->
              <div class="current-autoship-details" id="cur-details">
                <div class="current-frequency-label">Deliver every:</div>
                <div class="current-freq-row">
                  <div class="qty-group">
                    <button>‚àí</button>
                    <input type="text" value="60" readonly>
                    <button>+</button>
                  </div>
                  <strong style="font-size:14px;">Days</strong>
                </div>
                <ul class="current-benefits">
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> Change, skip, or cancel any time.</li>
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> Earn PureRewards points.</li>
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> Always get best available discount.</li>
                </ul>
              </div>
            </div>

            <!-- Buy Once -->
            <div class="current-radio-option" id="cur-buyonce-opt" onclick="curSelect('buyonce')">
              <div class="current-radio-header">
                <div class="current-radio-left">
                  <input type="radio" name="cur-autoship" id="cur-no">
                  <label for="cur-no">Buy Once</label>
                </div>
                <div class="current-price-display">
                  <span class="currency">$</span>45<span class="decimals">20</span>
                </div>
              </div>
            </div>
          </div>
        </fieldset>

        <!-- Bug callout -->
        <div class="bug-callout">
          <span class="bug-icon">üêõ</span>
          <span><strong>Bug:</strong> Both options show $45.20. Autoship should show ~$40.68 (10% off). Zero perceived value = zero reason to subscribe. The "Save at checkout" copy makes it worse ‚Äî implies the savings happens <em>later</em>, not now.</span>
        </div>
      </div>

      <!-- ATC -->
      <div class="pdp-section">
        <button class="pdp-atc-btn green">Add to Cart</button>
      </div>

      <!-- Product info -->
      <div class="pdp-info-table">
        <div class="pdp-info-row"><span>Recommended use:</span><span>1 Capsule</span></div>
        <div class="pdp-info-row"><span>Servings per container:</span><span>60 Servings</span></div>
        <div class="pdp-info-row"><span>Price per serving:</span><span>$0.75</span></div>
      </div>
    </div>
  </div>

  <!-- ======== PROPOSED (FIXED) ======== -->
  <div class="version-col">
    <div class="version-label proposed"><span class="dot"></span> Proposed ‚Äî Redesign</div>
    <div class="pdp-panel">
      <div class="pdp-panel-top">
        <div class="pdp-free-ship">FREE Shipping</div>
        <div class="pdp-ship-time">Ships today if ordered within <strong>8 hr 17 min</strong></div>
      </div>

      <div class="pdp-section">
        <div class="pdp-select-wrap">
          <span class="pdp-select-label">Options</span>
          <select id="new-variant-select" onchange="updateVariant()">
            <option value="30" data-price="27.00">30 Capsules</option>
            <option value="60" data-price="45.20" selected>60 Capsules</option>
            <option value="120" data-price="76.00">120 Capsules</option>
          </select>
        </div>
      </div>

      <div class="pdp-section">
        <div class="qty-stock-row">
          <div>
            <div class="qty-label">Quantity:</div>
            <div class="qty-group">
              <button onclick="adjustQty(-1)">‚àí</button>
              <input type="text" id="new-qty" value="1" readonly>
              <button onclick="adjustQty(1)">+</button>
            </div>
          </div>
          <div class="in-stock">
            <svg viewBox="0 0 20 20" fill="none"><path d="M5 10l3.5 3.5L15 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            In Stock
          </div>
        </div>
      </div>

      <!-- AUTOSHIP ‚Äî REDESIGNED (same layout as current, with proper pricing) -->
      <div class="pdp-section">
        <fieldset style="border:none;padding:0;">
          <div class="new-radio-group">
            <!-- Autoship option -->
            <div class="new-radio-option selected" id="new-autoship-opt" onclick="newSelect('autoship')">
              <div class="new-radio-header">
                <div class="new-radio-left">
                  <input type="radio" name="new-autoship" id="new-yes" checked>
                  <label for="new-yes">Autoship & Save</label>
                  <span class="new-save-badge" id="autoship-badge">SAVE 10%</span>
                </div>
                <div class="new-radio-right">
                  <div class="new-price-display green" id="autoship-price">
                    <span class="currency">$</span><span class="main-val">40</span><span class="decimals">68</span>
                  </div>
                  <div class="new-price-was" id="autoship-original">$45.20</div>
                </div>
              </div>
              <!-- Expanded: frequency + benefits side by side -->
              <div class="new-autoship-details" id="new-details">
                <div class="new-details-row">
                  <div class="new-freq-block">
                    <div class="new-freq-label">Deliver every:</div>
                    <div class="new-freq-row">
                      <div class="qty-group">
                        <button onclick="adjustFreq(-5)">‚àí</button>
                        <input type="text" id="freq-input" value="60" readonly>
                        <button onclick="adjustFreq(5)">+</button>
                      </div>
                      <span class="days-label">Days</span>
                    </div>
                  </div>
                  <ul class="new-benefits">
                    <li><span class="check-sm">‚úì</span> Cancel anytime</li>
                    <li><span class="check-sm">‚úì</span> Skip deliveries</li>
                    <li><span class="check-sm">‚úì</span> Earn PureRewards</li>
                    <li><span class="check-sm">‚úì</span> Best available price</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Buy Once option -->
            <div class="new-radio-option" id="new-buyonce-opt" onclick="newSelect('buyonce')">
              <div class="new-radio-header">
                <div class="new-radio-left">
                  <input type="radio" name="new-autoship" id="new-no">
                  <label for="new-no">Buy Once</label>
                </div>
                <div class="new-price-display" id="buyonce-price">
                  <span class="currency">$</span><span class="main-val">45</span><span class="decimals">20</span>
                </div>
              </div>
            </div>
          </div>
        </fieldset>

        <!-- Savings banner -->
        <div class="savings-banner" id="savings-banner">
          <span class="savings-icon">üí∞</span>
          <span>You save <strong id="banner-save-amt">$4.52</strong> with Autoship ‚Äî plus free shipping on every delivery!</span>
        </div>
      </div>

      <!-- ATC -->
      <div class="pdp-section">
        <button class="pdp-atc-btn green" id="new-atc-btn">Add to Cart ‚Äî Autoship</button>
      </div>

      <!-- Product info ‚Äî dynamic per-serving price -->
      <div class="pdp-info-table">
        <div class="pdp-info-row"><span>Recommended use:</span><span>1 Capsule</span></div>
        <div class="pdp-info-row"><span>Servings per container:</span><span>60 Servings</span></div>
        <div class="pdp-info-row"><span>Price per serving:</span><span id="new-per-serving">$0.68</span></div>
      </div>
    </div>
  </div>

  <!-- ======== V3 ‚Äî BUTTON VARIANT SELECTOR ======== -->
  <div class="version-col">
    <div class="version-label proposed"><span class="dot"></span> V3 ‚Äî Button Options</div>
    <div class="pdp-panel">
      <div class="pdp-panel-top">
        <div class="pdp-free-ship">FREE Shipping</div>
        <div class="pdp-ship-time">Ships today if ordered within <strong>8 hr 17 min</strong></div>
      </div>

      <div class="pdp-section">
        <div class="qty-label" style="margin-bottom:6px;">Options:</div>
        <div class="pdp-variant-btns">
          <button class="pdp-variant-btn" data-value="30" data-price="27.00" onclick="v3SelectVariant(this)">30 Caps</button>
          <button class="pdp-variant-btn is-active" data-value="60" data-price="45.20" onclick="v3SelectVariant(this)">60 Caps</button>
          <button class="pdp-variant-btn" data-value="120" data-price="76.00" onclick="v3SelectVariant(this)">120 Caps</button>
        </div>
      </div>

      <div class="pdp-section">
        <div class="qty-stock-row">
          <div>
            <div class="qty-label">Quantity:</div>
            <div class="qty-group">
              <button onclick="v3AdjustQty(-1)">‚àí</button>
              <input type="text" id="v3-qty" value="1" readonly>
              <button onclick="v3AdjustQty(1)">+</button>
            </div>
          </div>
          <div class="in-stock">
            <svg viewBox="0 0 20 20" fill="none"><path d="M5 10l3.5 3.5L15 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            In Stock
          </div>
        </div>
      </div>

      <div class="pdp-section">
        <fieldset style="border:none;padding:0;">
          <div class="new-radio-group">
            <div class="new-radio-option selected" id="v3-autoship-opt" onclick="v3Select('autoship')">
              <div class="new-radio-header">
                <div class="new-radio-left">
                  <input type="radio" name="v3-autoship" id="v3-yes" checked>
                  <label for="v3-yes">Autoship & Save</label>
                  <span class="new-save-badge" id="v3-badge">SAVE 10%</span>
                </div>
                <div class="new-radio-right">
                  <div class="new-price-display green" id="v3-autoship-price">
                    <span class="currency">$</span><span class="main-val">40</span><span class="decimals">68</span>
                  </div>
                  <div class="new-price-was" id="v3-autoship-original">$45.20</div>
                </div>
              </div>
              <div class="new-autoship-details" id="v3-details">
                <div class="new-details-row">
                  <div class="new-freq-block">
                    <div class="new-freq-label">Deliver every:</div>
                    <div class="new-freq-row">
                      <div class="qty-group">
                        <button onclick="v3AdjustFreq(-5)">‚àí</button>
                        <input type="text" id="v3-freq-input" value="60" readonly>
                        <button onclick="v3AdjustFreq(5)">+</button>
                      </div>
                      <span class="days-label">Days</span>
                    </div>
                  </div>
                  <ul class="new-benefits">
                    <li><span class="check-sm">‚úì</span> Cancel anytime</li>
                    <li><span class="check-sm">‚úì</span> Skip deliveries</li>
                    <li><span class="check-sm">‚úì</span> Earn PureRewards</li>
                    <li><span class="check-sm">‚úì</span> Best available price</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="new-radio-option" id="v3-buyonce-opt" onclick="v3Select('buyonce')">
              <div class="new-radio-header">
                <div class="new-radio-left">
                  <input type="radio" name="v3-autoship" id="v3-no">
                  <label for="v3-no">Buy Once</label>
                </div>
                <div class="new-price-display" id="v3-buyonce-price">
                  <span class="currency">$</span><span class="main-val">45</span><span class="decimals">20</span>
                </div>
              </div>
            </div>
          </div>
        </fieldset>

        <div class="savings-banner" id="v3-savings-banner">
          <span class="savings-icon">üí∞</span>
          <span>You save <strong id="v3-banner-save-amt">$4.52</strong> with Autoship ‚Äî plus free shipping on every delivery!</span>
        </div>
      </div>

      <div class="pdp-section">
        <button class="pdp-atc-btn green" id="v3-atc-btn">Add to Cart ‚Äî Autoship</button>
      </div>

      <div class="pdp-info-table">
        <div class="pdp-info-row"><span>Recommended use:</span><span>1 Capsule</span></div>
        <div class="pdp-info-row"><span>Servings per container:</span><span id="v3-servings">60 Servings</span></div>
        <div class="pdp-info-row"><span>Price per serving:</span><span id="v3-per-serving">$0.68</span></div>
      </div>
    </div>
  </div>
</div>

<!-- ========== LIVE BRANDING VERSIONS ========== -->
<div class="live-section-header">
  <h2>Proposed Redesign ‚Äî Live Site Branding</h2>
  <p>Same autoship pricing fix, styled to match the actual PureFormulas live site &nbsp;‚Ä¢&nbsp; Calcium (citrate) ‚Äì 180 Capsules by Pure Encapsulations &nbsp;‚Ä¢&nbsp; Base price: $32.50</p>
</div>

<div class="live-comparison-wrap">

  <!-- ======== PROPOSED ‚Äî LIVE BRANDING ======== -->
  <div class="version-col">
    <div class="version-label live"><span class="dot"></span> Proposed ‚Äî Live Branding</div>
    <div class="live-panel">
      <div class="live-panel-top">
        <div class="live-panel-section" style="padding-top:8px;">
          <div class="live-free-ship">FREE Shipping</div>
          <p class="live-ship-time">This item will ship today if ordered within <strong>8 hr 53 min</strong></p>
        </div>
        <div class="live-panel-section">
          <div class="live-qty-row">
            <div>
              <div class="live-qty-label">Quantity:</div>
              <div class="live-qty-group">
                <button onclick="liveAdjustQty(-1)">‚àí</button>
                <input type="text" id="live-qty" value="1" readonly>
                <button onclick="liveAdjustQty(1)">+</button>
              </div>
            </div>
            <div class="live-in-stock">
              <svg width="14" height="14" viewBox="0 0 20 20" fill="none"><path d="M5 10l3.5 3.5L15 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              In Stock
            </div>
          </div>
        </div>
      </div>

      <!-- Autoship fieldset -->
      <div class="live-panel-section">
        <fieldset style="border:none;padding:0;">
          <div class="live-radio-group">
            <!-- Autoship option -->
            <div class="live-radio-option selected" id="live-autoship-opt" onclick="liveSelect('autoship')">
              <div class="live-radio-header">
                <div class="live-radio-left">
                  <input type="radio" name="live-autoship" id="live-yes" checked>
                  <label for="live-yes">Autoship & Save</label>
                  <span class="live-save-badge" id="live-badge">SAVE 10%</span>
                </div>
                <div style="text-align:right;">
                  <div class="live-price live-price-big green" id="live-autoship-price">
                    <span class="currency">$</span><span class="main-price">29</span><span class="decimals">25</span>
                  </div>
                  <div class="live-price-was" id="live-autoship-original">$32.50</div>
                </div>
              </div>

              <!-- Expanded details -->
              <div class="live-autoship-details" id="live-details">
                <h3 class="live-freq-label">Deliver every:</h3>
                <div class="live-freq-row">
                  <div class="live-qty-group">
                    <button onclick="liveAdjustFreq(-5)">‚àí</button>
                    <input type="text" id="live-freq-input" value="45" readonly>
                    <button onclick="liveAdjustFreq(5)">+</button>
                  </div>
                  <span class="days-label">Days</span>
                </div>
                <ul class="live-benefits">
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> <span>Change, skip, or cancel any time.</span></li>
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> <span>Earn PureRewards points.</span></li>
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> <span>Always get best available discount.</span></li>
                </ul>
              </div>

              <!-- Collapsed state (hidden when expanded) -->
              <div class="live-collapsed-text" id="live-collapsed" style="display:none;">
                Never run out. <button class="learn-more">Learn More</button>
              </div>

              <!-- ATC inside autoship card -->
              <button class="live-atc-btn" id="live-atc-btn">Add to Cart ‚Äî Autoship</button>
            </div>

            <!-- Buy Once option -->
            <div class="live-radio-option" id="live-buyonce-opt" onclick="liveSelect('buyonce')">
              <div class="live-radio-header">
                <div class="live-radio-left">
                  <input type="radio" name="live-autoship" id="live-no">
                  <label for="live-no">Buy Once</label>
                </div>
                <div class="live-price live-price-small" id="live-buyonce-price">
                  <span class="currency">$</span><span class="main-price">32</span><span class="decimals">50</span>
                </div>
              </div>
            </div>
          </div>
        </fieldset>

        <!-- Savings banner -->
        <div class="live-savings-banner" id="live-savings-banner">
          <span>You save <strong id="live-banner-save-amt">$3.25</strong> with Autoship ‚Äî plus free shipping on every delivery!</span>
        </div>
      </div>

      <!-- Product info table -->
      <div class="live-info-table">
        <div class="live-info-row"><span>Recommended use:</span><span>2 Capsules</span></div>
        <div class="live-info-row"><span>Servings per container:</span><span>90 Servings</span></div>
        <div class="live-info-row"><span>Price per serving:</span><span id="live-per-serving">$0.33</span></div>
        <div class="live-info-row"><span>Price per Unit*:</span><span id="live-per-unit">$0.16 per Capsule</span></div>
      </div>
      <div class="live-info-note">*Price Per Unit may reflect product's price per capsule, ounce, fluid ounce, etc.</div>
    </div>
  </div>

  <!-- ======== V3 BUTTONS ‚Äî LIVE BRANDING ======== -->
  <div class="version-col">
    <div class="version-label live"><span class="dot"></span> V3 Buttons ‚Äî Live Branding</div>
    <div class="live-panel">
      <div class="live-panel-top">
        <div class="live-panel-section" style="padding-top:8px;">
          <div class="live-free-ship">FREE Shipping</div>
          <p class="live-ship-time">This item will ship today if ordered within <strong>8 hr 53 min</strong></p>
        </div>
        <div class="live-panel-section">
          <div class="live-qty-row">
            <div>
              <div class="live-qty-label">Quantity:</div>
              <div class="live-qty-group">
                <button onclick="lv3AdjustQty(-1)">‚àí</button>
                <input type="text" id="lv3-qty" value="1" readonly>
                <button onclick="lv3AdjustQty(1)">+</button>
              </div>
            </div>
            <div class="live-in-stock">
              <svg width="14" height="14" viewBox="0 0 20 20" fill="none"><path d="M5 10l3.5 3.5L15 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              In Stock
            </div>
          </div>
        </div>
      </div>

      <!-- Variant buttons -->
      <div class="live-panel-section">
        <div class="live-qty-label" style="margin-bottom:6px;">Options:</div>
        <div style="display:flex;gap:8px;">
          <button class="pdp-variant-btn is-active" data-value="180" data-price="32.50" onclick="lv3SelectVariant(this)" style="font-family:inherit;border-color:#205c40;background:#e6f4ee;color:#205c40;">180 Caps</button>
          <button class="pdp-variant-btn" data-value="360" data-price="58.50" onclick="lv3SelectVariant(this)" style="font-family:inherit;">360 Caps</button>
        </div>
      </div>

      <!-- Autoship fieldset -->
      <div class="live-panel-section">
        <fieldset style="border:none;padding:0;">
          <div class="live-radio-group">
            <div class="live-radio-option selected" id="lv3-autoship-opt" onclick="lv3Select('autoship')">
              <div class="live-radio-header">
                <div class="live-radio-left">
                  <input type="radio" name="lv3-autoship" id="lv3-yes" checked>
                  <label for="lv3-yes">Autoship & Save</label>
                  <span class="live-save-badge" id="lv3-badge">SAVE 10%</span>
                </div>
                <div style="text-align:right;">
                  <div class="live-price live-price-big green" id="lv3-autoship-price">
                    <span class="currency">$</span><span class="main-price">29</span><span class="decimals">25</span>
                  </div>
                  <div class="live-price-was" id="lv3-autoship-original">$32.50</div>
                </div>
              </div>

              <div class="live-autoship-details" id="lv3-details">
                <h3 class="live-freq-label">Deliver every:</h3>
                <div class="live-freq-row">
                  <div class="live-qty-group">
                    <button onclick="lv3AdjustFreq(-5)">‚àí</button>
                    <input type="text" id="lv3-freq-input" value="45" readonly>
                    <button onclick="lv3AdjustFreq(5)">+</button>
                  </div>
                  <span class="days-label">Days</span>
                </div>
                <ul class="live-benefits">
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> <span>Change, skip, or cancel any time.</span></li>
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> <span>Earn PureRewards points.</span></li>
                  <li><span class="check-circle"><svg viewBox="0 0 12 12"><path d="M2.5 6l2.5 2.5L9.5 4"/></svg></span> <span>Always get best available discount.</span></li>
                </ul>
              </div>

              <div class="live-collapsed-text" id="lv3-collapsed" style="display:none;">
                Never run out. <button class="learn-more">Learn More</button>
              </div>

              <button class="live-atc-btn" id="lv3-atc-btn">Add to Cart ‚Äî Autoship</button>
            </div>

            <div class="live-radio-option" id="lv3-buyonce-opt" onclick="lv3Select('buyonce')">
              <div class="live-radio-header">
                <div class="live-radio-left">
                  <input type="radio" name="lv3-autoship" id="lv3-no">
                  <label for="lv3-no">Buy Once</label>
                </div>
                <div class="live-price live-price-small" id="lv3-buyonce-price">
                  <span class="currency">$</span><span class="main-price">32</span><span class="decimals">50</span>
                </div>
              </div>
            </div>
          </div>
        </fieldset>

        <div class="live-savings-banner" id="lv3-savings-banner">
          <span>You save <strong id="lv3-banner-save-amt">$3.25</strong> with Autoship ‚Äî plus free shipping on every delivery!</span>
        </div>
      </div>

      <div class="live-info-table">
        <div class="live-info-row"><span>Recommended use:</span><span>2 Capsules</span></div>
        <div class="live-info-row"><span>Servings per container:</span><span id="lv3-servings">90 Servings</span></div>
        <div class="live-info-row"><span>Price per serving:</span><span id="lv3-per-serving">$0.33</span></div>
        <div class="live-info-row"><span>Price per Unit*:</span><span id="lv3-per-unit">$0.16 per Capsule</span></div>
      </div>
      <div class="live-info-note">*Price Per Unit may reflect product's price per capsule, ounce, fluid ounce, etc.</div>
    </div>
  </div>

</div>

<script>
  // ========== CONFIG ==========
  const AUTOSHIP_DISCOUNT = 0.10;
  let basePrice = 45.20;
  let servings = 60;
  let currentMode = 'autoship'; // new panel state
  let qty = 1;
  let freq = 60;

  // ========== CURRENT (BROKEN) PANEL ==========
  function curSelect(mode) {
    const autoOpt = document.getElementById('cur-autoship-opt');
    const buyOpt = document.getElementById('cur-buyonce-opt');
    const details = document.getElementById('cur-details');
    if (mode === 'autoship') {
      autoOpt.classList.add('selected');
      buyOpt.classList.remove('selected');
      document.getElementById('cur-yes').checked = true;
      details.style.display = '';
    } else {
      autoOpt.classList.remove('selected');
      buyOpt.classList.add('selected');
      document.getElementById('cur-no').checked = true;
      details.style.display = 'none';
    }
  }

  // ========== NEW (FIXED) PANEL ==========
  function newSelect(mode) {
    currentMode = mode;
    const autoOpt = document.getElementById('new-autoship-opt');
    const buyOpt = document.getElementById('new-buyonce-opt');
    const details = document.getElementById('new-details');
    const banner = document.getElementById('savings-banner');
    const atcBtn = document.getElementById('new-atc-btn');

    if (mode === 'autoship') {
      autoOpt.classList.add('selected');
      buyOpt.classList.remove('selected');
      document.getElementById('new-yes').checked = true;
      details.style.display = '';
      banner.classList.remove('hidden');
      atcBtn.textContent = 'Add to Cart ‚Äî Autoship';
    } else {
      autoOpt.classList.remove('selected');
      buyOpt.classList.add('selected');
      document.getElementById('new-no').checked = true;
      details.style.display = 'none';
      banner.classList.add('hidden');
      atcBtn.textContent = 'Add to Cart';
    }
    updatePrices();
  }

  function updateVariant() {
    const sel = document.getElementById('new-variant-select');
    const opt = sel.options[sel.selectedIndex];
    basePrice = parseFloat(opt.dataset.price);
    servings = parseInt(opt.value) || 60;
    updatePrices();
  }

  function adjustQty(delta) {
    qty = Math.max(1, qty + delta);
    document.getElementById('new-qty').value = qty;
  }

  function adjustFreq(delta) {
    freq = Math.max(5, freq + delta);
    document.getElementById('freq-input').value = freq;
  }

  function updatePrices() {
    const autoPrice = Math.round(basePrice * (1 - AUTOSHIP_DISCOUNT) * 100) / 100;
    const savings = Math.round((basePrice - autoPrice) * 100) / 100;

    // Buy once card
    const bp = formatPrice(basePrice);
    document.querySelector('#buyonce-price .main-val').textContent = bp.main;
    document.querySelector('#buyonce-price .decimals').textContent = bp.dec;

    // Autoship card
    const ap = formatPrice(autoPrice);
    document.querySelector('#autoship-price .main-val').textContent = ap.main;
    document.querySelector('#autoship-price .decimals').textContent = ap.dec;
    document.getElementById('autoship-original').textContent = '$' + basePrice.toFixed(2);
    document.getElementById('autoship-badge').textContent = 'SAVE $' + savings.toFixed(2) + ' (10%)';

    // Savings banner
    document.getElementById('banner-save-amt').textContent = '$' + savings.toFixed(2);

    // Per-serving price
    const effectivePrice = currentMode === 'autoship' ? autoPrice : basePrice;
    const perServing = (effectivePrice / servings).toFixed(2);
    document.getElementById('new-per-serving').textContent = '$' + perServing;
  }

  function formatPrice(price) {
    const parts = price.toFixed(2).split('.');
    return { main: parts[0], dec: parts[1] };
  }

  // ========== V3 PANEL ==========
  let v3BasePrice = 45.20;
  let v3Servings = 60;
  let v3Mode = 'autoship';
  let v3Qty = 1;
  let v3Freq = 60;

  function v3SelectVariant(btn) {
    document.querySelectorAll('.pdp-variant-btn').forEach(b => b.classList.remove('is-active'));
    btn.classList.add('is-active');
    v3BasePrice = parseFloat(btn.dataset.price);
    v3Servings = parseInt(btn.dataset.value) || 60;
    document.getElementById('v3-servings').textContent = v3Servings + ' Servings';
    v3UpdatePrices();
  }

  function v3Select(mode) {
    v3Mode = mode;
    const autoOpt = document.getElementById('v3-autoship-opt');
    const buyOpt = document.getElementById('v3-buyonce-opt');
    const details = document.getElementById('v3-details');
    const banner = document.getElementById('v3-savings-banner');
    const atcBtn = document.getElementById('v3-atc-btn');

    if (mode === 'autoship') {
      autoOpt.classList.add('selected');
      buyOpt.classList.remove('selected');
      document.getElementById('v3-yes').checked = true;
      details.style.display = '';
      banner.classList.remove('hidden');
      atcBtn.textContent = 'Add to Cart ‚Äî Autoship';
    } else {
      autoOpt.classList.remove('selected');
      buyOpt.classList.add('selected');
      document.getElementById('v3-no').checked = true;
      details.style.display = 'none';
      banner.classList.add('hidden');
      atcBtn.textContent = 'Add to Cart';
    }
    v3UpdatePrices();
  }

  function v3AdjustQty(delta) {
    v3Qty = Math.max(1, v3Qty + delta);
    document.getElementById('v3-qty').value = v3Qty;
  }

  function v3AdjustFreq(delta) {
    v3Freq = Math.max(5, v3Freq + delta);
    document.getElementById('v3-freq-input').value = v3Freq;
  }

  function v3UpdatePrices() {
    const autoPrice = Math.round(v3BasePrice * (1 - AUTOSHIP_DISCOUNT) * 100) / 100;
    const savings = Math.round((v3BasePrice - autoPrice) * 100) / 100;

    const bp = formatPrice(v3BasePrice);
    document.querySelector('#v3-buyonce-price .main-val').textContent = bp.main;
    document.querySelector('#v3-buyonce-price .decimals').textContent = bp.dec;

    const ap = formatPrice(autoPrice);
    document.querySelector('#v3-autoship-price .main-val').textContent = ap.main;
    document.querySelector('#v3-autoship-price .decimals').textContent = ap.dec;
    document.getElementById('v3-autoship-original').textContent = '$' + v3BasePrice.toFixed(2);
    document.getElementById('v3-banner-save-amt').textContent = '$' + savings.toFixed(2);

    const effectivePrice = v3Mode === 'autoship' ? autoPrice : v3BasePrice;
    document.getElementById('v3-per-serving').textContent = '$' + (effectivePrice / v3Servings).toFixed(2);
  }

  // ========== LIVE BRANDING ‚Äî PROPOSED PANEL ==========
  let liveBasePrice = 32.50;
  let liveServings = 90;
  let liveCapsules = 180;
  let liveMode = 'autoship';
  let liveQty = 1;
  let liveFreq = 45;

  function liveSelect(mode) {
    liveMode = mode;
    const autoOpt = document.getElementById('live-autoship-opt');
    const buyOpt = document.getElementById('live-buyonce-opt');
    const details = document.getElementById('live-details');
    const collapsed = document.getElementById('live-collapsed');
    const banner = document.getElementById('live-savings-banner');
    const atcBtn = document.getElementById('live-atc-btn');

    if (mode === 'autoship') {
      autoOpt.classList.add('selected');
      buyOpt.classList.remove('selected');
      document.getElementById('live-yes').checked = true;
      details.style.display = '';
      collapsed.style.display = 'none';
      banner.classList.remove('hidden');
      atcBtn.textContent = 'Add to Cart ‚Äî Autoship';
      atcBtn.style.display = '';
    } else {
      autoOpt.classList.remove('selected');
      buyOpt.classList.add('selected');
      document.getElementById('live-no').checked = true;
      details.style.display = 'none';
      collapsed.style.display = '';
      banner.classList.add('hidden');
      atcBtn.textContent = 'Add to Cart';
      // Move ATC outside ‚Äî for Buy Once, show it in buyonce context
      atcBtn.style.display = '';
    }
    liveUpdatePrices();
  }

  function liveAdjustQty(delta) {
    liveQty = Math.max(1, liveQty + delta);
    document.getElementById('live-qty').value = liveQty;
  }

  function liveAdjustFreq(delta) {
    liveFreq = Math.max(5, liveFreq + delta);
    document.getElementById('live-freq-input').value = liveFreq;
  }

  function liveUpdatePrices() {
    const autoPrice = Math.round(liveBasePrice * (1 - AUTOSHIP_DISCOUNT) * 100) / 100;
    const savings = Math.round((liveBasePrice - autoPrice) * 100) / 100;

    // Autoship price
    const ap = formatPrice(autoPrice);
    document.querySelector('#live-autoship-price .main-price').textContent = ap.main;
    document.querySelector('#live-autoship-price .decimals').textContent = ap.dec;
    document.getElementById('live-autoship-original').textContent = '$' + liveBasePrice.toFixed(2);
    document.getElementById('live-badge').textContent = 'SAVE $' + savings.toFixed(2) + ' (10%)';

    // Buy once price
    const bp = formatPrice(liveBasePrice);
    document.querySelector('#live-buyonce-price .main-price').textContent = bp.main;
    document.querySelector('#live-buyonce-price .decimals').textContent = bp.dec;

    // Savings banner
    document.getElementById('live-banner-save-amt').textContent = '$' + savings.toFixed(2);

    // Per-serving / per-unit
    const effectivePrice = liveMode === 'autoship' ? autoPrice : liveBasePrice;
    document.getElementById('live-per-serving').textContent = '$' + (effectivePrice / liveServings).toFixed(2);
    document.getElementById('live-per-unit').textContent = '$' + (effectivePrice / liveCapsules).toFixed(2) + ' per Capsule';
  }

  // ========== LIVE BRANDING ‚Äî V3 BUTTONS PANEL ==========
  let lv3BasePrice = 32.50;
  let lv3Servings = 90;
  let lv3Capsules = 180;
  let lv3Mode = 'autoship';
  let lv3Qty = 1;
  let lv3Freq = 45;

  function lv3SelectVariant(btn) {
    btn.parentElement.querySelectorAll('.pdp-variant-btn').forEach(b => {
      b.classList.remove('is-active');
      b.style.borderColor = '';
      b.style.background = '';
      b.style.color = '';
    });
    btn.classList.add('is-active');
    btn.style.borderColor = '#205c40';
    btn.style.background = '#e6f4ee';
    btn.style.color = '#205c40';
    lv3BasePrice = parseFloat(btn.dataset.price);
    lv3Capsules = parseInt(btn.dataset.value) || 180;
    lv3Servings = Math.floor(lv3Capsules / 2);
    document.getElementById('lv3-servings').textContent = lv3Servings + ' Servings';
    lv3UpdatePrices();
  }

  function lv3Select(mode) {
    lv3Mode = mode;
    const autoOpt = document.getElementById('lv3-autoship-opt');
    const buyOpt = document.getElementById('lv3-buyonce-opt');
    const details = document.getElementById('lv3-details');
    const collapsed = document.getElementById('lv3-collapsed');
    const banner = document.getElementById('lv3-savings-banner');
    const atcBtn = document.getElementById('lv3-atc-btn');

    if (mode === 'autoship') {
      autoOpt.classList.add('selected');
      buyOpt.classList.remove('selected');
      document.getElementById('lv3-yes').checked = true;
      details.style.display = '';
      collapsed.style.display = 'none';
      banner.classList.remove('hidden');
      atcBtn.textContent = 'Add to Cart ‚Äî Autoship';
    } else {
      autoOpt.classList.remove('selected');
      buyOpt.classList.add('selected');
      document.getElementById('lv3-no').checked = true;
      details.style.display = 'none';
      collapsed.style.display = '';
      banner.classList.add('hidden');
      atcBtn.textContent = 'Add to Cart';
    }
    lv3UpdatePrices();
  }

  function lv3AdjustQty(delta) {
    lv3Qty = Math.max(1, lv3Qty + delta);
    document.getElementById('lv3-qty').value = lv3Qty;
  }

  function lv3AdjustFreq(delta) {
    lv3Freq = Math.max(5, lv3Freq + delta);
    document.getElementById('lv3-freq-input').value = lv3Freq;
  }

  function lv3UpdatePrices() {
    const autoPrice = Math.round(lv3BasePrice * (1 - AUTOSHIP_DISCOUNT) * 100) / 100;
    const savings = Math.round((lv3BasePrice - autoPrice) * 100) / 100;

    const ap = formatPrice(autoPrice);
    document.querySelector('#lv3-autoship-price .main-price').textContent = ap.main;
    document.querySelector('#lv3-autoship-price .decimals').textContent = ap.dec;
    document.getElementById('lv3-autoship-original').textContent = '$' + lv3BasePrice.toFixed(2);
    document.getElementById('lv3-badge').textContent = 'SAVE $' + savings.toFixed(2) + ' (10%)';

    const bp = formatPrice(lv3BasePrice);
    document.querySelector('#lv3-buyonce-price .main-price').textContent = bp.main;
    document.querySelector('#lv3-buyonce-price .decimals').textContent = bp.dec;

    document.getElementById('lv3-banner-save-amt').textContent = '$' + savings.toFixed(2);

    const effectivePrice = lv3Mode === 'autoship' ? autoPrice : lv3BasePrice;
    document.getElementById('lv3-per-serving').textContent = '$' + (effectivePrice / lv3Servings).toFixed(2);
    document.getElementById('lv3-per-unit').textContent = '$' + (effectivePrice / lv3Capsules).toFixed(2) + ' per Capsule';
  }

  // Initialize
  updatePrices();
  v3UpdatePrices();
  liveUpdatePrices();
  lv3UpdatePrices();
</script>
</body>
</html>
